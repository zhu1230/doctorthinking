page.clearMessages
if (User.authenticate(current_user.login, params[:old_pass]).nil? )
	page.showMessage "旧密码错误，清重试",:warning
elsif params[:password].nil? || params[:password].blank?
page.showMessage "密码不能为空!",:validation
elsif current_user.update_attributes({:password=>params[:password],:password_confirmation=>params[:password_confirm]})
page.showMessage "修改成功!",:success
else
ret=showErrors current_user
#	errors=page.showErrors current_user
	page.showMessage ret,:validation

end