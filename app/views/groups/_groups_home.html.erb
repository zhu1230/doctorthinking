<div class="module">
	<div class="module_head">
		<%= render :partial=>'widgets/widget_header', :locals=>{:widget_title=>'Groups'} %>
	</div>
	<div class="module_body">
		<% count = 0 %>
		<% @groups.each do |group | %>
			<% count = count + 1 %>
			<% if (count == @groups.size) %>
				<div class="groups_widget_group last_child">
			<% else %>
				<div class="groups_widget_group">
			<% end %>
				<div class="groups_widget_photo">
					<% if group.profile_photo %>
						<%= link_to image_tag(group.profile_photo.url(:small), :alt=>group.name), group_url(group) %>
					<% else %>
						<%= link_to 'No Photo', group_url(group) %>
					<% end %>
				</div>
				<div class="groups_widget_text">
					<span class="group_name">
						<%= link_to group.name, group_url(group) %>
					</span><br/>
					<%= group.users.size %> members
				</div>
			</div>
		<% end %>
		<% if @groups.length == 0 %>
			No groups exist!
		<% end %>
		<div style="clear:both;"></div>
	</div>
	<div class="module_foot">
		<div class="foot_left">
			<% if logged_in? %>
				<%= link_to '新建圈子', new_group_path %>
			<% end %>
		</div>
		<div class="foot_right">
			<%= link_to "显示全部", groups_url %>
		</div>
		<div style="clear:both;"></div>
	</div>
</div>