indexer
{
}

searchd
{
  listen = 127.0.0.1:9312
  log = log/searchd.log
  query_log = log/searchd.query.log
  pid_file = log/searchd.production.pid
}

source bingli_info_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = zhu1230
  sql_db = enginey_development
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `bingli_infos`.`id` * 2 + 0 AS `id` , `bingli_infos`.`id` AS `id`, `bingli_infos`.`title` AS `title`, GROUP_CONCAT(DISTINCT IFNULL(`tags`.`name`, '0') SEPARATOR ' ') AS `tags`, `users`.`login` AS `author`, `keshis`.`name` AS `keshi`, `binglis`.`zhusu` AS `zhusu`, `binglis`.`xianbingshi` AS `xianbingshi`, `binglis`.`jiwang` AS `jiwang`, `binglis`.`tigejiancha` AS `tigejiancha`, `binglis`.`age` AS `age`, `binglis`.`marriage` AS `marriage`, `binglis`.`sex` AS `sex`, `binglis`.`yibanbuchong` AS `yibanbuchong`, `binglis`.`zongbuchong` AS `zongbuchong`, `binglis`.`final` AS `final`, GROUP_CONCAT(DISTINCT IFNULL(`chubu_details`.`content`, '0') SEPARATOR ' ') AS `chubus`, GROUP_CONCAT(DISTINCT IFNULL(`question_details`.`content`, '0') SEPARATOR ' ') AS `questions`, GROUP_CONCAT(DISTINCT IFNULL(`fuzhu_types`.`name`, '0') SEPARATOR ' ') AS `fuzhu_types`, group_concat(concat('--',fuzhu_details.fuzhu_type_id,'--',fuzhu_details.content)) AS `fuzhus`, `bingli_infos`.`id` AS `sphinx_internal_id`, 2745095070 AS `class_crc`, 0 AS `sphinx_deleted`, IFNULL(`users`.`login`, '') AS `author_sort`, IFNULL(`keshis`.`name`, '') AS `keshi_sort`, GROUP_CONCAT(DISTINCT IFNULL(IFNULL(`fuzhu_types`.`name`, ''), '0') SEPARATOR ' ') AS `fuzhu_types_sort`, `bingli_infos`.`keshi_id` AS `keshi_id`, UNIX_TIMESTAMP(`bingli_infos`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`bingli_infos`.`updated_at`) AS `updated_at`, `users`.`id` AS `user_id`, GROUP_CONCAT(DISTINCT IFNULL(`tags`.`id`, '0') SEPARATOR ',') AS `tag_ids` FROM `bingli_infos`    LEFT OUTER JOIN `taggings` ON (`bingli_infos`.`id` = `taggings`.`taggable_id` AND `taggings`.`taggable_type` = 'BingliInfo')  LEFT OUTER JOIN `tags` ON (`tags`.`id` = `taggings`.`tag_id`) AND context = 'tags'   LEFT OUTER JOIN `users` ON `users`.id = `bingli_infos`.user_id   LEFT OUTER JOIN `keshis` ON `keshis`.id = `bingli_infos`.keshi_id   LEFT OUTER JOIN `binglis` ON `binglis`.id = `bingli_infos`.bingli_id   LEFT OUTER JOIN `chubu_details` ON chubu_details.bingli_id = binglis.id   LEFT OUTER JOIN `question_details` ON question_details.bingli_id = binglis.id   LEFT OUTER JOIN `fuzhu_details` ON fuzhu_details.bingli_id = binglis.id   LEFT OUTER JOIN `fuzhu_types` ON `fuzhu_types`.id = `fuzhu_details`.fuzhu_type_id  WHERE `bingli_infos`.`id` >= $start AND `bingli_infos`.`id` <= $end GROUP BY `bingli_infos`.`id`, `bingli_infos`.`id`, `bingli_infos`.`title`, `users`.`login`, `keshis`.`name`, `binglis`.`zhusu`, `binglis`.`xianbingshi`, `binglis`.`jiwang`, `binglis`.`tigejiancha`, `binglis`.`age`, `binglis`.`marriage`, `binglis`.`sex`, `binglis`.`yibanbuchong`, `binglis`.`zongbuchong`, `binglis`.`final`, `bingli_infos`.`id`, `users`.`login`, `keshis`.`name`, `bingli_infos`.`keshi_id`, `bingli_infos`.`created_at`, `bingli_infos`.`updated_at`, `users`.`id`  ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `bingli_infos` 
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = class_crc
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = keshi_id
  sql_attr_uint = user_id
  sql_attr_timestamp = created_at
  sql_attr_timestamp = updated_at
  sql_attr_str2ordinal = author_sort
  sql_attr_str2ordinal = keshi_sort
  sql_attr_str2ordinal = fuzhu_types_sort
  sql_attr_multi = uint tag_ids from field
  sql_query_info = SELECT * FROM `bingli_infos` WHERE `id` = (($id - 0) / 2)
}

index bingli_info_core
{
  source = bingli_info_core_0
  path = db/sphinx/development/bingli_info_core
  #charset_type = utf-8
  charset_type =zh_cn.utf-8
  charset_dictpath =/
}

index bingli_info
{
  type = distributed
  local = bingli_info_core
}

source fuzhu_detail_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = zhu1230
  sql_db = enginey_development
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `fuzhu_details`.`id` * 2 + 1 AS `id` , `fuzhu_details`.`content` AS `content`, `fuzhu_details`.`id` AS `sphinx_internal_id`, 94501459 AS `class_crc`, 0 AS `sphinx_deleted`, `fuzhu_types`.`id` AS `fuzhu_type_id`, `bingli_infos`.`id` AS `bingli_info_id` FROM `fuzhu_details`    LEFT OUTER JOIN `fuzhu_types` ON `fuzhu_types`.id = `fuzhu_details`.fuzhu_type_id   LEFT OUTER JOIN `binglis` ON `binglis`.id = `fuzhu_details`.bingli_id   LEFT OUTER JOIN `bingli_infos` ON bingli_infos.bingli_id = binglis.id  WHERE `fuzhu_details`.`id` >= $start AND `fuzhu_details`.`id` <= $end GROUP BY `fuzhu_details`.`id`, `fuzhu_details`.`content`, `fuzhu_details`.`id`, `fuzhu_types`.`id`, `bingli_infos`.`id`  ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `fuzhu_details` 
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = class_crc
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = fuzhu_type_id
  sql_attr_uint = bingli_info_id
  sql_query_info = SELECT * FROM `fuzhu_details` WHERE `id` = (($id - 1) / 2)
}

index fuzhu_detail_core
{
  source = fuzhu_detail_core_0
  path = db/sphinx/development/fuzhu_detail_core
  #charset_type = utf-8
  charset_type =zh_cn.utf-8
  charset_dictpath =/
}

index fuzhu_detail
{
  type = distributed
  local = fuzhu_detail_core
}
